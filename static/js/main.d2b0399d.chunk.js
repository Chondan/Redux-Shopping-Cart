(this["webpackJsonpredux-shopping-cart"]=this["webpackJsonpredux-shopping-cart"]||[]).push([[0],{20:function(e,t,n){e.exports={"photos-list":"itemsList_photos-list__2MYDY",item:"itemsList_item__2XPbw"}},29:function(e,t,n){e.exports=n(41)},34:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(15),o=n.n(i),l=(n(34),n(28)),u=n(3),s=n(12),m=n(19),d=n.n(m),f=n(26),p=n(10),b=Object(p.c)({sortComparer:function(e,t){return e.price-t.price}}),E=b.getInitialState({status:"idle"}),v=Object(p.b)("items/fetchItems",Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/photos?_limit=20");case 2:return t=e.sent,e.next=5,t.json();case 5:return(n=e.sent).forEach((function(e){var t,n;e.price=(t=300,n=1e3,Math.floor(Math.random()*(n-t+1))+t),e.amount=0})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))),j=Object(p.d)({name:"items",initialState:E,reducers:{},extraReducers:(a={},Object(s.a)(a,v.fulfilled,(function(e,t){b.setAll(e,t),e.status="succeeded",console.log("fulfilled")})),Object(s.a)(a,v.pending,(function(){return console.log("pending")})),Object(s.a)(a,v.rejected,(function(e,t){return console.log(t.error.message)})),a)}).reducer,h=b.getSelectors((function(e){return e.items})),_=(h.selectAll,h.selectById),O=h.selectIds,g=n(20),y=n.n(g),C=n(27),x=Object(p.c)(),I=x.getInitialState({totalPrice:0}),S=function(e){var t=0;return e.ids.forEach((function(n){return t+=e.entities[n].price*e.entities[n].amount})),t},w=Object(p.d)({name:"cart",initialState:I,reducers:{itemAdded:{reducer:function(e,t){var n=t.payload.id;x.addOne(e,t.payload),e.entities[n].amount++,e.totalPrice=S(e)},prepare:function(e){return{payload:Object(C.a)({},e)}}},addAmount:function(e,t){e.entities[t.payload].amount++,e.totalPrice=S(e)},subtractAmount:function(e,t){e.entities[t.payload].amount--,e.totalPrice=S(e),0===e.entities[t.payload].amount&&x.removeOne(e,t.payload)},removeItem:function(e,t){x.removeOne(e,t.payload),e.totalPrice=S(e)},clearCart:function(e){x.removeAll(e),e.totalPrice=0}},extraReducers:{}}),N=w.reducer,P=w.actions,k=P.itemAdded,A=P.addAmount,L=P.subtractAmount,R=P.removeItem,M=P.clearCart,B=N,D=x.getSelectors((function(e){return e.cart})),J=D.selectAll,T=D.selectById,z=D.selectIds;function U(e){var t,n=e.photoId,a=e.isInCart,r=Object(u.c)((function(e){return _(e,n)})),i=Object(u.b)();return c.a.createElement("div",{ref:function(e){return t=e},onClick:function(){return function(e){i(k(r)),e.style.transform="scale(0.8)",setTimeout((function(){e.style.transform="scale(1)"}),300)}(t)},title:r.title,className:y.a.item,style:{borderColor:a?"black":"#ddd"}},c.a.createElement("h4",null,r.title.length>30?r.title.substring(0,30)+"...":r.title),c.a.createElement("img",{alt:r.title,src:r.url}),c.a.createElement("div",null,"Price: $",r.price))}var W=function(){var e=Object(u.b)(),t=Object(u.c)(O).slice(0,20),n=Object(u.c)(z),a=Object(u.c)((function(e){return e.items.status}));Object(r.useEffect)((function(){"idle"===a&&e(v())}),[e,a]);var i=t.map((function(e){return c.a.createElement(U,{key:e,photoId:e,isInCart:n.includes(e)})})),o=Object(r.useState)(window.innerWidth),s=Object(l.a)(o,2),m=s[0],d=s[1],f=function(){d(window.innerWidth)};Object(r.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}));var p={gridTemplateColumns:function(){for(var e=Math.min(Math.floor(m/200),5),t="",n=0;n<e;n++)t+=" auto";return t}()};return c.a.createElement("div",null,t?c.a.createElement("div",{style:p,className:y.a["photos-list"]},i):"Loading...")},Y=n(9),$=n.n(Y),V=function(e){var t=e.itemId,n=e.add,a=e.subtract,r=Object(u.c)((function(e){return T(e,t)})),i=Object(u.b)();return c.a.createElement("div",{className:$.a["cart-item"]},c.a.createElement("div",{className:$.a["cart-item-info"]},c.a.createElement("img",{alt:r.title,src:r.url}),c.a.createElement("div",{className:$.a["item-info"]},c.a.createElement("div",null,r.title),c.a.createElement("div",null,"Price: $",r.price),c.a.createElement("div",{className:$.a["item-adjustment"]},c.a.createElement("button",{className:$.a["adjust-button"],onClick:function(){return a(t)}},"-"),c.a.createElement("div",{className:$.a.amount},r.amount),c.a.createElement("button",{className:$.a["adjust-button"],onClick:function(){return n(t)}},"+"),c.a.createElement("button",{className:$.a["adjust-button"],onClick:function(){return i(R(t))}},"x")))))},X=function(){var e=Object(u.c)(J),t=Object(u.b)(),n=Object(u.c)((function(e){return e.cart.totalPrice})).toLocaleString("en-US",{style:"currency",currency:"USD"}),a=function(e){t(A(e))},r=function(e){t(L(e))};return c.a.createElement("div",null,e.length>0?c.a.createElement("div",null,c.a.createElement("div",{onClick:function(){return t(M())},className:$.a["clear-cart-button"]},"Clear Cart"),c.a.createElement("div",{className:$.a["total-price-info"]},"Total Price: ",n)):"",e?e.map((function(e){return c.a.createElement(V,{key:e.id,itemId:e.id,add:a,subtract:r})})):"Loading...")},q=n(14),F=n(2),G=function(){var e=Object(u.c)(J).reduce((function(e,t){return e+t.amount}),0);return c.a.createElement("nav",null,c.a.createElement("ul",{className:"navbar-container"},c.a.createElement("li",null,c.a.createElement(q.b,{to:"/Redux-Shopping-Cart"},"Items")),c.a.createElement("li",null,c.a.createElement(q.b,{to:"/Redux-Shopping-Cart/cart"},"Cart")," ",e)))};var H=function(){return c.a.createElement(q.a,null,c.a.createElement("div",null,c.a.createElement(G,null),c.a.createElement(F.d,null,c.a.createElement(F.b,{exact:!0,path:"/Redux-Shopping-Cart",component:W}),c.a.createElement(F.b,{exact:!0,path:"/Redux-Shopping-Cart/cart",component:X}),c.a.createElement(F.a,{to:"/Redux-Shopping-Cart"}))))},K=Object(p.a)({reducer:{items:j,cart:B}});o.a.render(c.a.createElement(u.a,{store:K},c.a.createElement(H,null)),document.getElementById("root"))},9:function(e,t,n){e.exports={"cart-item":"cart_cart-item__2rEcp","cart-item-info":"cart_cart-item-info__9_on_","item-info":"cart_item-info__xsyPB","item-adjustment":"cart_item-adjustment__2IELD","adjust-button":"cart_adjust-button__2JPkw",amount:"cart_amount__c-C1_","clear-cart-button":"cart_clear-cart-button__1-DVu","total-price-info":"cart_total-price-info__2coyM"}}},[[29,1,2]]]);
//# sourceMappingURL=main.d2b0399d.chunk.js.map